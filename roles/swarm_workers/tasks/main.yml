---

    - name: Check if Swarm has already been Initialized
      shell: docker info --format \{\{.Swarm.LocalNodeState\}\}\
      register: swarm_status 

    - name: Add Workers to the Swarm
      shell: "docker swarm join --token {{ hostvars[groups['swarm_managers'][0]]['worker_token']['stdout'] }} {{ hostvars[groups['swarm_managers'][0]]['private_ip_address'] }}:2377"
      when: swarm_status.stdout_lines[0] == "inactive"